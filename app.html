<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EDGRIND ‚Äî Result Calculator</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Sans:ital,wght@0,300;0,400;0,500;0,600;1,400&display=swap" rel="stylesheet">
<link rel="stylesheet" href="./css/app.css">
</head>
<body class="loading">
    <div id="app-preloader">
        <div class="loader-content">
            <div class="spinner"></div>
            <div class="loader-text">EDGRIND<span>.</span></div>
        </div>
    </div>
    
    <main id="app-main" style="display: none;">
        <div class="container">
          <div id="user-email-badge" class="user-email-badge"></div>

<!-- HEADER -->
<div class="header">
  <div class="logo">EDGRIND</div>
  <div class="header-right">
    <div class="tagline">Science-based result calculator<br><strong>1 kg fat = 8,000 kcal deficit</strong></div>
  </div>
</div>

<!-- INPUT GRID -->
<div class="two-col" id="input-section">

  <div class="card">
    <div class="card-title">Your Stats</div>
    <div class="two-col" style="gap:10px;">
      <div class="field span2">
        <label>Sex</label>
        <div class="seg">
          <button class="seg-btn on" onclick="setSex('male',this)">Male</button>
          <button class="seg-btn" onclick="setSex('female',this)">Female</button>
        </div>
      </div>
      <div class="field">
        <label>Age</label>
        <div class="input-wrap">
          <input type="number" id="age" placeholder="28" min="15" max="90">
          <span class="unit">yrs</span>
        </div>
      </div>
      <div class="field">
        <label>Height</label>
        <div class="input-wrap">
          <input type="number" id="height" placeholder="175" min="100" max="250">
          <span class="unit">cm</span>
        </div>
      </div>
      <div class="field">
        <label>Current Weight</label>
        <div class="input-wrap">
          <input type="number" id="weight" placeholder="90" min="30" max="300">
          <span class="unit">kg</span>
        </div>
      </div>
      <div class="field">
        <label>Goal Weight</label>
        <div class="input-wrap">
          <input type="number" id="goal-weight" placeholder="75" min="30" max="300">
          <span class="unit">kg</span>
        </div>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="card-title">Activity & Plan</div>
    <div style="display:flex;flex-direction:column;gap:10px;">
      <div class="field">
        <label>Activity Level</label>
        <div class="input-wrap">
          <select id="activity">
            <option value="1.2">Sedentary (desk job, no exercise)</option>
            <option value="1.375">Light (1‚Äì3 workouts/week)</option>
            <option value="1.55" selected>Moderate (3‚Äì5 workouts/week)</option>
            <option value="1.725">Active (6‚Äì7 workouts/week)</option>
            <option value="1.9">Very Active (2√ó training/day)</option>
          </select>
        </div>
      </div>
      <div class="field">
        <label>Deficit Target</label>
        <div class="input-wrap">
          <select id="deficit">
            <option value="250">Gentle  ‚àí250 kcal/day (~0.5 kg/month)</option>
            <option value="500" selected>Standard ‚àí500 kcal/day (~1 kg/month)</option>
            <option value="750">Aggressive ‚àí750 kcal/day (~1.5 kg/month)</option>
          </select>
        </div>
      </div>
      <div class="info-strip">
        <span class="ic">‚ö°</span>
        Macros calculated for your <strong>goal weight</strong> ‚Äî so you're already eating like that person.
      </div>
      <button class="calc-btn" onclick="calculate()">CALCULATE  ‚Üí</button>
    </div>
  </div>
</div>

<!-- IDEAL WEIGHT PANEL (shows after calc) -->
<div class="ideal-panel reveal" id="ideal-panel" style="display:none;">
  <div class="ideal-header">
    <div>
      <div class="ideal-title">‚öñÔ∏è WEIGHT ANALYSIS & RECOMMENDATIONS</div>
      <div style="font-size:11px;color:var(--muted);margin-top:3px;letter-spacing:1px;text-transform:uppercase;">Based on your height, age & sex</div>
    </div>
    <div class="bmi-badge" id="bmi-badge">BMI ‚Äî</div>
  </div>

  <!-- BMI Scale -->
  <div style="margin-bottom:16px;">
    <div class="bmi-scale">
      <div class="bmi-seg" style="background:#4ea8ff;flex:2;" title="Underweight <18.5"></div>
      <div class="bmi-seg" style="background:#ff2442;flex:3;" title="Normal 18.5‚Äì24.9"></div>
      <div class="bmi-seg" style="background:#ffc107;flex:2;" title="Overweight 25‚Äì29.9"></div>
      <div class="bmi-seg" style="background:#ff6b35;flex:2;" title="Obese 30‚Äì34.9"></div>
      <div class="bmi-seg" style="background:#ff4455;flex:2;" title="Obese II 35+"></div>
    </div>
    <div class="bmi-pointer-wrap"><div class="bmi-pointer" id="bmi-pointer">‚Äî</div></div>
    <div class="bmi-labels">
      <span>&lt;18.5 Underweight</span>
      <span>18.5‚Äì24.9 Normal</span>
      <span>25‚Äì29.9 Over</span>
      <span>30‚Äì34.9 Obese I</span>
      <span>35+ Obese II</span>
    </div>
  </div>

  <!-- Ideal weight formulas -->
  <div class="ideal-grid" id="ideal-grid"></div>

  <!-- Recommendation -->
  <div class="recommendation-box" id="rec-box"></div>
</div>

<!-- RESULTS -->
<div id="results">

  <div class="reveal mt12">
    <div class="kpi-grid">
      <div class="kpi star">
        <div class="kpi-val" id="r-cals">‚Äî</div>
        <div class="kpi-label">Calories / day</div>
        <div class="kpi-sub">with deficit</div>
      </div>
      <div class="kpi">
        <div class="kpi-val" id="r-prot">‚Äî</div>
        <div class="kpi-label">Protein g</div>
        <div class="kpi-sub">goal weight</div>
      </div>
      <div class="kpi">
        <div class="kpi-val" id="r-fat">‚Äî</div>
        <div class="kpi-label">Fat g</div>
        <div class="kpi-sub">goal weight</div>
      </div>
      <div class="kpi">
        <div class="kpi-val" id="r-carb">‚Äî</div>
        <div class="kpi-label">Carbs g</div>
        <div class="kpi-sub">goal weight</div>
      </div>
    </div>
    <div class="info-strip mt12"><span class="ic">üìä</span><span id="r-info"></span></div>
  </div>

  <!-- PROGRESS CARD -->
  <div class="progress-card reveal" style="transition-delay:.08s;">
    <div class="prog-header">
      <div>
        <div class="prog-title">üî• REAL PROGRESS</div>
        <div style="font-size:11px;color:var(--muted);letter-spacing:1px;text-transform:uppercase;margin-top:2px;">Calculated from tracker entries ¬∑ 8,000 kcal = 1 kg fat</div>
      </div>
      <div style="text-align:right;">
        <div class="prog-pct-big" id="prog-pct">0%</div>
        <div class="prog-pct-label">to goal</div>
      </div>
    </div>

    <div class="bar-wrap">
      <div class="bar-track"><div class="bar-fill" id="bar-fill"></div></div>
      <div class="bar-labels">
        <span id="bar-start">‚Äî</span>
        <span class="bar-mid" id="bar-mid"></span>
        <span id="bar-goal">‚Äî</span>
      </div>
    </div>

    <div class="stats-row">
      <div class="stat-mini">
        <div class="stat-mini-val" id="rp-lost">0.000</div>
        <div class="stat-mini-label">Fat burned, kg</div>
      </div>
      <div class="stat-mini">
        <div class="stat-mini-val" id="rp-total-def">0</div>
        <div class="stat-mini-label">Total deficit, kcal</div>
      </div>
      <div class="stat-mini">
        <div class="stat-mini-val orange" id="rp-remain">‚Äî</div>
        <div class="stat-mini-label">Still to lose, kg</div>
      </div>
    </div>

    <div class="countdown-row">
      <div class="ring-wrap">
        <svg width="80" height="80" viewBox="0 0 80 80">
          <circle class="ring-bg" cx="40" cy="40" r="35"/>
          <circle class="ring-fg" id="ring-fg" cx="40" cy="40" r="35"/>
        </svg>
        <div class="ring-text">
          <div class="ring-num" id="cd-days">‚Äî</div>
          <div class="ring-sub">days</div>
        </div>
      </div>
      <div class="cd-info">
        <h3 id="cd-title">DAYS TO GOAL</h3>
        <p id="cd-desc">Add daily entries to get a real prediction based on your actual average deficit.</p>
      </div>
    </div>
  </div>

</div><!-- /results -->

<!-- TRACKER -->
<div class="tracker-card reveal" style="transition-delay:.04s;">
  <div class="tracker-top">
    <div>
      <div class="tracker-title">DEFICIT TRACKER</div>
      <div class="tracker-sub">Tap a day ‚Üí log real calories eaten</div>
    </div>
    <div class="tracker-controls">
      <div class="streak-pill">
        <div>
          <div class="streak-val" id="streak-num">0</div>
          <div class="streak-lbl">streak üî•</div>
        </div>
      </div>
      <button class="ghost-btn" onclick="confirmReset()">Reset</button>
    </div>
  </div>

  <div class="legend">
    <div class="leg"><div class="leg-dot" style="background:rgba(255,36,66,.2);border-color:rgba(255,36,66,.5);"></div>On track</div>
    <div class="leg"><div class="leg-dot" style="background:rgba(255,107,53,.2);border-color:rgba(255,107,53,.5);"></div>Partial</div>
    <div class="leg"><div class="leg-dot" style="background:rgba(255,68,85,.15);border-color:rgba(255,68,85,.4);"></div>Missed</div>
  </div>

  <div class="month-nav">
    <button class="nav-btn" onclick="chMonth(-1)">‚Üê</button>
    <div class="month-label" id="month-label"></div>
    <button class="nav-btn" onclick="chMonth(1)">‚Üí</button>
  </div>
  <div class="cal-header" id="cal-header"></div>
  <div class="cal-grid" id="cal-grid"></div>

  <div class="tracker-stats">
    <div class="ts"><div class="ts-val" id="ts-streak">0</div><div class="ts-label">Streak</div></div>
    <div class="ts"><div class="ts-val" id="ts-total">0</div><div class="ts-label">Days logged</div></div>
    <div class="ts"><div class="ts-val" id="ts-avg">‚Äî</div><div class="ts-label">Avg deficit</div></div>
    <div class="ts"><div class="ts-val" id="ts-rate">0%</div><div class="ts-label">Month rate</div></div>
  </div>

  <div class="tip-row">
    <span class="tip-icon">üí°</span>
    <span id="tip-text">Tap any past day to log your real calories. Progress recalculates instantly!</span>
  </div>
</div>

</div><!-- /container -->
<!-- MODAL -->
<div class="overlay" id="overlay" onclick="bgClose(event)">
  <div class="modal">
    <button class="modal-x" onclick="closeModal()">‚úï</button>
    <div class="modal-date" id="m-date"></div>
    <div class="modal-dow" id="m-dow"></div>

    <div class="status-row">
      <button class="status-btn" id="sb-done"    onclick="setStatus('done')"   >‚úì On track</button>
      <button class="status-btn" id="sb-partial" onclick="setStatus('partial')">~ Partial</button>
      <button class="status-btn" id="sb-miss"    onclick="setStatus('miss')"   >‚úï Missed</button>
    </div>

    <div class="modal-field">
      <label>Calories eaten today</label>
      <div class="input-wrap">
        <input type="number" id="m-eaten" placeholder="1800" min="0" max="9999" oninput="recalcM()">
        <span class="unit">kcal</span>
      </div>
    </div>

    <div class="target-note" id="m-note" style="display:none;"></div>

    <div class="result-strip">
      <div class="rs-item">
        <div class="rs-val pos" id="m-def">‚Äî</div>
        <div class="rs-label">Deficit kcal</div>
      </div>
      <div class="rs-item">
        <div class="rs-val neu" id="m-fat-g">‚Äî</div>
        <div class="rs-label">Fat burned g</div>
      </div>
      <div class="rs-item">
        <div class="rs-val neu" id="m-fat-kg">‚Äî</div>
        <div class="rs-label">Fat burned kg</div>
      </div>
    </div>

    <button class="modal-save" onclick="saveDay()">SAVE DAY</button>
  </div>
</div>
    </main>
<script type="module" src="./js/app-logic.js" defer></script>
</body>
</html>
